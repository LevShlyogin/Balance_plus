# [CALC-COND-BERMAN] Расчет давления в конденсаторе по методике Бермана

**Версия документа:** 1.0
**Статус:** Черновик
**Ответственный:** @D0k2

## 1. Назначение
Методика предназначена для расчета абсолютного давления пара в конденсаторе ($P_k$) и давления перед выхлопным патрубком турбины ($P_1$) на основе геометрических характеристик конденсатора и параметров охлаждающей воды. Расчет ведется согласно нормативному методу Л.Д. Бермана для температур охлаждающей воды до 45°С.

Алгоритм учитывает наличие двух пучков трубок: основного (ОП) и встроенного (ВП).

## 2. Источники и Нормативы
*   [1] Старый скрипт написанный на VBA (макрос для Excel файлов).
*   [2] IAPWS-IF97 (для свойств воды и пара).

## 3. Область применения и допущения
*   **Применимость:** Поверхностные конденсаторы паровых турбин.
*   **Ограничение:** Температура охлаждающей воды на входе $t_{w1} < 45^\circ\text{C}$.
*   **Допущения:**
    *   Процесс теплопередачи рассматривается раздельно для основного и встроенного пучков.
    *   Давление в паровом пространстве принимается одинаковым для обоих пучков (итерационный подбор).
    *   Учитывается влияние воздушной плотности через характеристику эжектора.

## 4. Входные данные (User Inputs)

### 4.1. Геометрия конденсатора
| Параметр | Обозначение (Код) | Символ | Единица | Описание |
| :--- | :--- | :---: | :---: | :--- |
| Внутренний диаметр труб | `diameter_inside_of_pipes` | $d_{in}$ | мм | |
| Толщина стенки трубы | `thickness_pipe_wall` | $s_{tube}$ | мм | |
| Длина труб (ОП) | `length_cooling_tubes_of_the_main_bundle` | $L_{OP}$ | мм | Активная длина |
| Число труб (ОП) | `number_cooling_tubes_of_the_main_bundle` | $N_{OP}$ | шт | |
| Длина труб (ВП) | `length_cooling_tubes_of_the_built-in_bundle` | $L_{VP}$ | мм | Активная длина |
| Число труб (ВП) | `number_cooling_tubes_of_the_built-in_bundle` | $N_{VP}$ | шт | |
| Тип материала трубок | `material_name` | $Material$ | - | Название принятого материала трубок |

### 4.2. Диапазоны работы конденсатора
| Параметр | Обозначение (Код) | Символ | Единица | Описание |
| :--- | :--- | :---: | :---: | :--- |
| Расход воздуха | `mass_flow_air` | $G_{air}$ | кг/ч | Присосы воздуха |
| Расход пара ном. | `mass_flow_steam_nom` | $G_{nom}$ | т/ч | Номинальная нагрузка |
| Максимальный расход охлаждающей воды |  |  |  |  |
| Номинальный расход охлаждающей воды |  |  |  |  |
| Минимальный расход охлаждающей воды |  |  |  |  |
| Максимальный расход охлаждающей воды через основные и встроенные пучки |  |  |  |  |
| Минимальный расход охлаждающей воды через основные и встроенные пучки |  |  |  |  |
| Максимальный расход охлаждающей воды через основные и встроенные пучки в один ход |  |  |  |  |
| Номинальный расход охлаждающей воды через основные и встроенные пучки в один ход |  |  |  |  |
| Минимальный расход охлаждающей воды через основные и встроенные пучки в один ход |  |  |  |  |
| Максимальный расход охлаждающей воды через основные и встроенные пучки в два хода |  |  |  |  |
| Минимальный расход охлаждающей воды через основные и встроенные пучки в два хода |  |  |  |  |
| Максимальный расход охлаждающей воды через основные пучки |  |  |  | встроенные пучки отключены |
| Минимальный расход охлаждающей воды через основные пучки |  |  |  | встроенные пучки отключены |
| Максимальный расход охлаждающей воды через встроенные пучки в один ход |  |  |  | основные пучки отключены |
| Минимальный расход охлаждающей воды через встроенные пучки в один ход |  |  |  | основные пучки отключены |
| Максимальный расход охлаждающей воды через встроенные пучки в два хода |  |  |  | основные пучки отключены |
| Минимальный расход охлаждающей воды через встроенные пучки в два хода |  |  |  | основные пучки отключены |
| Максимальный расход охлаждающей воды через встроенные пучки в четыре хода |  |  |  | основные пучки отключены |
| Минимальный расход охлаждающей воды через встроенные пучки в четыре хода |  |  |  | основные пучки отключены |

### 4.3. Режимные параметры
| Параметр | Обозначение (Код) | Символ | Единица | Описание |
| :--- | :--- | :---: | :---: | :--- |
| Коэфф. чистоты | `coefficient_b` | $\beta$ | - | Коэфф. загрязнения (0.65...1.0) |
| Число ходов (ОП) | `number_cooling_water_passes_of_the_main_bundle` | $Z_{OP}$ | - | |
| Число ходов (ВП) | `number_cooling_water_passes_of_the_built-in_bundle` | $Z_{VP}$ | - | |
| Расход охл. воды (ОП) | `mass_flow_cooling_water` | $G_{w}^{OP}$ | т/ч | |
| Расход охл. воды (ВП) | `mass_flow_cooling_water_built-in_beam` | $G_{w}^{VP}$ | т/ч | |
| Темп. воды вход (ОП) | `temperature_cooling_water_1` | $t_{w1}$ | °С | |
| Темп. воды вход (ВП) | `temperature_cooling_water_built-in_beam_1` | $t_{w1}^{VP}$ | °С | Обычно равна $t_{w1}$ |
| Теплопроводность мат. | `thermal_conductivity_cooling_surface_tube_material` | $\lambda$ | Вт/(м·К) | Свойство материала трубок |
| Расход пара на вход | `mass_flow_flow_path_1` | $G_1$ | т/ч | Текущий расход пара |
| Энтальпия пара | `enthalpy-flow-path` | $H_1$ | кДж/кг | За турбиной |
| Число эжекторов | `number_ejector` | $Z_{ej}$ | шт | По умолчанию 1 |

## 5. Свойства среды (IF97 / Lookups)
| Параметр | Функция IF97 / Источник | Зависимость | Единица |
| :--- | :--- | :---: | :---: |
| Давление насыщения | `tsat2p` | $P_{sat} = f(t_{sat})$ | МПа (перевод в кгс/см²) |

## 6. Алгоритм расчета

### Шаг 1. Геометрические характеристики
Наружный диаметр трубок:

$$ d_{out} = d_{in} + 2 \cdot s_{tube} $$

Площадь поверхности теплообмена (основной $F_{OP}$ и встроенный $F_{VP}$ пучки):

$$ F_{OP} = \pi \cdot L_{OP} \cdot N_{OP} \cdot d_{out} $$

$$ F_{VP} = \pi \cdot L_{VP} \cdot N_{VP} \cdot d_{out} $$

> Примечание:
> 1. Параметры $L_{OP}$, $L_{VP}$, $d_{out}$ переводим в [м]
> 2. Для валидации используем число $pi = 3,14159$ 

### Шаг 2. Гидравлические и нагрузочные характеристики
Удельная номинальная паровая нагрузка:

$$ g_{k\_nom} = \frac{G_{nom}}{F_{OP} + F_{VP}} $$

> Примечание:
> 1. Параметр $G_{nom}$ переводим в [кг/ч]

Скорость воды в трубках ($C_{OP}, C_{VP}$):

$$ C_{OP} = \frac{G_{w}^{OP} \cdot Z_{OP}}{900 \cdot \pi \cdot N_{OP} \cdot d_{in}^2} $$

$$ C_{VP} = \frac{G_{w}^{VP} \cdot Z_{VP}}{900 \cdot \pi \cdot N_{VP} \cdot d_{in}^2} $$

> Примечание:
> 1. Параметр $d_{in}$ переводим в [м]
> 2. Для валидации используем число $pi = 3,14159$ 

### Шаг 3. Расчет поправочных коэффициентов
*Далее формулы приводятся для ОП. Для ВП расчет аналогичен с заменой индексов и соответствующих температур.*

**3.1 Коэффициенты $B$ и $X$:**

$$ B = \frac{1.1 \cdot C}{d_{in}^{0.25}}, \quad X = 0.12 \cdot (1 + 0.15 \cdot t_{w1}) $$

**3.2 Коэффициент скорости воды ($\Phi_w$):**

$$ \Phi_w = B^X $$

**3.3 Коэффициент температуры воды ($\Phi_t$):**

* Если $t_{w1} < 35^\circ\text{C}$:

$$ \Phi_t = 1 - \frac{0.42}{1000} \cdot (35 - t_{w1})^2 $$

* Если $t_{w1} \ge 35^\circ\text{C}$:

$$ \Phi_t = 1 + 0.002 \cdot (t_{w1} - 35) $$

**3.4 Коэффициент числа ходов ($\Phi_z$):**

*   Если $t_{w1} < 35^\circ\text{C}$:

$$ \Phi_z = 1 + \frac{Z - 2}{10} \cdot \left(1 - \frac{t_{w1}}{35}\right) $$

*   Если $t_{w1} \ge 35^\circ\text{C}$:

$$ \Phi_z = 1 + \frac{Z - 2}{10} \cdot \left(1 - \frac{t_{w1}}{45}\right) $$

**3.5 Коэффициент удельной паровой нагрузки ($\Phi_g$):**

Приведенный расход пара:

$$ g_{k\_priv} = (0.9 - 0.012 \cdot t_{w1}) \cdot g_{k\_nom} $$

Текущая удельная нагрузка:

$$ g_k = \frac{G_1 \cdot 1000}{F_{OP} + F_{VP}} $$

*   Если $g_k / g_{k\_priv} \ge 1$:

$$\Phi_g = 1$$

*   Если $g_k / g_{k\_priv} < 1$:

$$ \Phi_g = \frac{g_k}{g_{k\_priv}} \cdot \left(2 - \frac{g_k}{g_{k\_priv}}\right) $$

### Шаг 4. Коэффициент теплопередачи

Базовый коэффициент теплопередачи ($K$):

$$ K = 3500 \cdot \Phi_w \cdot \Phi_t \cdot \Phi_z \cdot \Phi_g $$

С учетом материала стенки ($K_{mat}$):

$$ K_{mat} = \left( \frac{1}{K} + \frac{s_{tube}}{\lambda} - \frac{0.001}{90} \right)^{-1} $$

С учетом загрязнения ($K_{zag}$):

$$ K_{zag} = \left( \frac{1}{K_{mat}} + R^* \right)^{-1} $$

> Примечание:
> 1. Выбор $R^*$ зависит от коэффициента $\beta$:
>     * Если $\beta = 1.0$, то $R^* = 10 \cdot 10^{-7}$
>     * Иначе $R^* = 1044 \cdot 10^{-7}$ (для $\beta \approx 0.75$)
>     * При $\beta < 0.75$ $R^*$ экстраполируется

### Шаг 5. Тепловой расчет и итерация

Коэффициент D:

$$ D = g_k \cdot F $$

Нагрев воды ($\Delta t_{heat}$):

$$ \Delta t_{heat} = \frac{D \cdot H_1}{G_{w}} $$

> Примечание:
> 1. Параметр $G_{w}$ переводим в [кг/ч]

Температурный напор ($\delta t$):

$$ \delta t = \frac{\Delta t_{heat}}{\exp\left(\frac{K_{zag} \cdot F}{G_{w}}\right) - 1} $$

> Примечание:
> 1. Параметр $G_{w}$ переводим в [кг/ч]

Температура насыщения ($t_{sat}$):

$$ t_{sat} = t_{w1} + \Delta t_{heat} + \delta t $$


**Итерационный процесс:**
Необходимо подобрать распределение нагрузки или скорректировать параметры так, чтобы температуры насыщения в основном и встроенном пучках совпали:

$$ |t_{sat}^{OP} - t_{sat}^{VP}| \le 0.001 $$

В рамках упрощенного алгоритма производится балансировка нагрева воды встроенного пучка:

$$ \Delta t_{heat}^{VP} = \frac{G_1 \cdot H_1 - \Delta t_{heat}^{OP} \cdot G_w^{OP}}{G_w^{VP}} $$

После чего пересчитывается $t_{sat}^{VP}$.

### Шаг 6. Определение итогового давления

**1. Давление в конденсаторе ($P_k$):**

Определяется по таблицам насыщенного пара (IF97) для найденной температуры $t_{sat}^{OP}$:

$$ P_k = f_{sat\_press}(t_{sat}^{OP}) \quad [\text{кгс/см}^2] $$

> Примечание:
> 1. Для валидации используем уравнение:
> 
> $$ P_k = \frac{\exp\left( 82.86568 + \frac{1.028003}{100} \cdot t_{w1} - \frac{7821.541}{t_{w1}} - 11.48776 \cdot \ln(t_{w1}) \right)}{0.0981} $$
>
> 2. Параметр $t_{w1}$ переводим в [К]

**2. Характеристика эжектора ($P_{ej}$):**

$$ P_{ej} = \frac{0.009 + 0.0003 \frac{G_{air}}{Z_{ej}} + 10 \cdot \exp\left( \frac{-7821.5}{T} + 82.86 + 10280 \cdot T - 11.48 \cdot \ln(T) \right)}{0.980665} $$

> Примечание:
> 1. Параметр $T$ определяется как: $T = t_{w1} + 1$
> 2. Параметр $t_{w1}$ переводим в [К]

## 7. Выходные данные (Outputs)

| Параметр | Переменная в коде | Символ | Единица | Описание |
| :--- | :--- | :---: | :---: | :--- |
| Давление за турбиной | `pressure_flow_path_1` | $P_1$ | кгс/см² | Итоговое расчетное давление |
| Температура насыщения | `temperature_saturation_cooling_tubes_of_the_main_bundle` | $t_{sat}$ | °С | |
| Коэфф. теплопередачи ОП | `coefficient_Kzag_cooling_tubes_of_the_main_bundle` | $K_{zag}^{OP}$ | Вт/(м²·К) | |
| Коэфф. теплопередачи ВП | `_` | $K_{zag}^{VP}$ | Вт/(м²·К) | |
| Нагрев воды ОП | `temperature_cooling_tubes_of_the_main_bundle` | $\Delta t_{heat}^{OP}$ | °С | |
| Нагрев воды ВП | `_` | $\Delta t_{heat}^{VP}$ | °С | |


## 8. Контрольный пример (Verification)

**Вход:**
*   `diameter_inside_of_pipes` = 24 мм, `thickness_pipe_wall` = 1 мм
*   `length_cooling_tubes_of_the_main_bundle` = 9000 мм, `N` = 10000 шт (условно)
*   `mass_flow_steam_nom` = 300 т/ч
*   `mass_flow_cooling_water` = 16000 т/ч
*   `temperature_cooling_water_1` = 20 °C
*   `mass_flow_flow_path_1` = 300 т/ч, `enthalpy` = 2300 кДж/кг

**Ожидаемый результат:**
*   `pressure_flow_path_1` ≈ 0.05 - 0.07 кгс/см² (значение зависит от точного расчета экспонент и свойств пара)

*   `velocity_real` = ... (допуск ±0.01)
